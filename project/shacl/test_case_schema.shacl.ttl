@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix schema1: <http://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix test_case_schema: <https://w3id.org/TranslatorSRI/test-case-schema/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

test_case_schema:SemanticSmokeTestCase a sh:NodeShape ;
    sh:closed true ;
    sh:description "Lifting schema from Shervin's runner JSON here as an example.  This schema is not yet complete." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:datatype xsd:string ;
            sh:description "A human-readable description for a TestCase" ;
            sh:maxCount 1 ;
            sh:order 2 ;
            sh:path schema1:description ],
        [ sh:datatype xsd:string ;
            sh:description "A human-readable name for a TestCase" ;
            sh:maxCount 1 ;
            sh:order 0 ;
            sh:path schema1:name ],
        [ sh:class test_case_schema:Precondition ;
            sh:nodeKind sh:BlankNode ;
            sh:order 5 ;
            sh:path test_case_schema:preconditions ],
        [ sh:class test_case_schema:SemanticSmokeTestOutput ;
            sh:minCount 1 ;
            sh:nodeKind sh:BlankNode ;
            sh:order 4 ;
            sh:path test_case_schema:outputs ],
        [ sh:description "A unique identifier for a TestCase" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:order 1 ;
            sh:path schema1:identifier ],
        [ sh:class test_case_schema:SemanticSmokeTestInput ;
            sh:minCount 1 ;
            sh:nodeKind sh:BlankNode ;
            sh:order 3 ;
            sh:path test_case_schema:inputs ] ;
    sh:targetClass test_case_schema:SemanticSmokeTestCase .

test_case_schema:TestSuite a sh:NodeShape ;
    sh:closed true ;
    sh:description "A holder for TestCase objects" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class test_case_schema:TestCase ;
            sh:nodeKind sh:IRI ;
            sh:order 0 ;
            sh:path test_case_schema:entries ] ;
    sh:targetClass test_case_schema:TestSuite .

test_case_schema:Input a sh:NodeShape ;
    sh:closed true ;
    sh:description "Represents an input to a TestCase" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:targetClass test_case_schema:Input .

test_case_schema:Output a sh:NodeShape ;
    sh:closed true ;
    sh:description "Represents an output from a TestCase" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:targetClass test_case_schema:Output .

test_case_schema:SemanticSmokeTestInput a sh:NodeShape ;
    sh:closed true ;
    sh:description "Lifting schema from Shervin's runner JSON here as an example.  This schema is not yet complete." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:description "The expected result of the query" ;
            sh:in ( "include_good" "exclude_bad" ) ;
            sh:maxCount 1 ;
            sh:order 6 ;
            sh:path test_case_schema:expected_result ],
        [ sh:datatype xsd:string ;
            sh:description "An answer that is returned from the test case, note: this must be combined with the expected_result to form a complete answer.  It might make sense to couple these in their own object instead of strictly sticking to the flat schema introduced by the spreadsheet here: https://docs.google.com/spreadsheets/d/1yj7zIchFeVl1OHqL_kE_pqvzNLmGml_FLbHDs-8Yvig/edit#gid=0" ;
            sh:maxCount 1 ;
            sh:order 5 ;
            sh:path test_case_schema:answer_informal_concept ],
        [ sh:datatype xsd:string ;
            sh:description "The object of the core triple to be tested" ;
            sh:maxCount 1 ;
            sh:order 3 ;
            sh:path test_case_schema:string_entry ],
        [ sh:description "The curie of the query" ;
            sh:maxCount 1 ;
            sh:order 7 ;
            sh:path test_case_schema:curie ],
        [ sh:datatype xsd:string ;
            sh:description "The node of the TRAPI query to replace." ;
            sh:maxCount 1 ;
            sh:order 9 ;
            sh:path test_case_schema:node ],
        [ sh:description "The environment in which this test must pass" ;
            sh:in ( "DEV" "CI" "TEST" "PROD" ) ;
            sh:maxCount 1 ;
            sh:order 1 ;
            sh:path test_case_schema:must_pass_environment ],
        [ sh:datatype xsd:string ;
            sh:description "The notes of the query" ;
            sh:maxCount 1 ;
            sh:order 10 ;
            sh:path test_case_schema:notes ],
        [ sh:description "The direction of the expected query result triple" ;
            sh:in ( "increased" "decreased" ) ;
            sh:maxCount 1 ;
            sh:order 4 ;
            sh:path test_case_schema:direction ],
        [ sh:datatype xsd:string ;
            sh:description "The answer must return in these many results" ;
            sh:maxCount 1 ;
            sh:order 8 ;
            sh:path test_case_schema:top_level ],
        [ sh:datatype xsd:date ;
            sh:description "The date by which this test must pass" ;
            sh:maxCount 1 ;
            sh:order 0 ;
            sh:path test_case_schema:must_pass_date ],
        [ sh:datatype xsd:string ;
            sh:description "The question a SME would ask" ;
            sh:maxCount 1 ;
            sh:order 2 ;
            sh:path test_case_schema:query ] ;
    sh:targetClass test_case_schema:SemanticSmokeTestInput .

test_case_schema:SemanticSmokeTestOutput a sh:NodeShape ;
    sh:closed true ;
    sh:description "Lifting schema from Shervin's runner JSON here as an example.  This schema is not yet complete." ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:targetClass test_case_schema:SemanticSmokeTestOutput .

test_case_schema:TestCase a sh:NodeShape ;
    sh:closed true ;
    sh:description "Represents a TestCase" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:property [ sh:class test_case_schema:Precondition ;
            sh:nodeKind sh:BlankNode ;
            sh:order 5 ;
            sh:path test_case_schema:preconditions ],
        [ sh:class test_case_schema:Output ;
            sh:nodeKind sh:BlankNode ;
            sh:order 4 ;
            sh:path test_case_schema:outputs ],
        [ sh:datatype xsd:string ;
            sh:description "A human-readable description for a TestCase" ;
            sh:maxCount 1 ;
            sh:order 2 ;
            sh:path schema1:description ],
        [ sh:class test_case_schema:Input ;
            sh:nodeKind sh:BlankNode ;
            sh:order 3 ;
            sh:path test_case_schema:inputs ],
        [ sh:description "A unique identifier for a TestCase" ;
            sh:maxCount 1 ;
            sh:order 1 ;
            sh:path schema1:identifier ],
        [ sh:datatype xsd:string ;
            sh:description "A human-readable name for a TestCase" ;
            sh:maxCount 1 ;
            sh:order 0 ;
            sh:path schema1:name ] ;
    sh:targetClass test_case_schema:TestCase .

test_case_schema:Precondition a sh:NodeShape ;
    sh:closed true ;
    sh:description "Represents a precondition for a TestCase" ;
    sh:ignoredProperties ( rdf:type ) ;
    sh:targetClass test_case_schema:Precondition .

